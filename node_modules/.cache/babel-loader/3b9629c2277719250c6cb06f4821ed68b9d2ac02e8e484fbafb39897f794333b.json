{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\minhn\\\\my-app\\\\webminhnhat\\\\src\\\\public\\\\login.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport axios from \"axios\";\nimport { supabase } from \"../supabasePrivate\";\nimport { Function, Encryptor } from \"../config/function\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Login = () => {\n  _s();\n  useEffect(() => {\n    const savedUser = localStorage.getItem(\"user\");\n    if (savedUser) {\n      window.location.href = Function.base_Url();\n    }\n  }, []);\n  const [username, setUsername] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const handleLogin = async () => {\n    if (!username.trim() || !password.trim()) {\n      Function.makeToast(\"Vui lòng nhập đầy đủ tên đăng nhập và mật khẩu!\", \"warning\");\n      return;\n    }\n    try {\n      const {\n        data,\n        error\n      } = await supabase.from(\"user\").select(\"*\").eq(\"username\", username).eq(\"password\", Function.stringToMD5(password)).single(); // chỉ lấy 1 user khớp\n\n      if (error) {\n        console.error(\"Lỗi đăng nhập:\", error.message);\n        Function.makeToast(\"Đăng nhập thất bại!\", \"warning\");\n        return;\n      }\n      if (!data) {\n        Function.makeToast(\"Sai tên đăng nhập hoặc mật khẩu!\", \"error\");\n        return;\n      }\n      localStorage.setItem(\"user\", Encryptor.encrypt(JSON.stringify(data))); // mã hóa thông tin \n      Function.showMessage(\"Thành công\", \"Đăng nhập thành công\", \"success\");\n      setTimeout(() => {\n        window.location.href = \"/\";\n      }, 1000);\n    } catch (err) {\n      console.error(err);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"style\", {\n      children: \"\\n\\n\\n          body, html {\\n            margin: 0;\\n            padding: 0;\\n            font-family: \\\"Segoe UI\\\", Arial, sans-serif;\\n          }\\n\\n          .login-container {\\n            padding-top: 25px;\\n            display: flex;\\n            justify-content: center;\\n            align-items: center;\\n          }\\n\\n          .login-box {\\n            background: #fff;\\n            border-radius: 12px;\\n            padding: 40px 35px;\\n            width: 340px;\\n            box-shadow: 0 0 20px rgba(0, 0, 0, 0.15);\\n            text-align: center;\\n          }\\n\\n          .login-box h3 {\\n            font-size: 17px;\\n            color: #0073e6;\\n            margin-bottom: 25px;\\n            letter-spacing: 0.5px;\\n          }\\n\\n          .login-box input[type=\\\"text\\\"],\\n          .login-box input[type=\\\"password\\\"] {\\n            width: 100%;\\n            padding: 10px 12px;\\n            border: 1px solid #ccc;\\n            border-radius: 6px;\\n            margin-bottom: 15px;\\n            font-size: 14px;\\n            outline: none;\\n            transition: border 0.2s ease;\\n          }\\n\\n          .login-box input[type=\\\"text\\\"]:focus,\\n          .login-box input[type=\\\"password\\\"]:focus {\\n            border-color: #0073e6;\\n          }\\n\\n          .login-box label {\\n            display: block;\\n            font-size: 13px;\\n            color: #444;\\n            margin-bottom: 20px;\\n          }\\n\\n          .login-box a {\\n            color: #0073e6;\\n            text-decoration: none;\\n            margin-left: 4px;\\n          }\\n\\n          .login-box a:hover {\\n            text-decoration: underline;\\n          }\\n\\n          .login-box button {\\n            width: 100%;\\n            background-color: #ff6600;\\n            color: white;\\n            border: none;\\n            padding: 12px;\\n            border-radius: 6px;\\n            font-size: 15px;\\n            font-weight: bold;\\n            cursor: pointer;\\n            transition: background-color 0.25s;\\n          }\\n\\n          .login-box button:hover {\\n            background-color: #e65c00;\\n          }\\n        \"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"login-container\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"login-box\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"\\u0110\\u0102NG NH\\u1EACP H\\u1EC6 TH\\u1ED0NG\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"Nh\\u1EADp t\\xEAn \\u0111\\u0103ng nh\\u1EADp\",\n          value: username,\n          onChange: e => setUsername(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"password\",\n          placeholder: \"Nh\\u1EADp m\\u1EADt kh\\u1EA9u\",\n          value: password,\n          onChange: e => setPassword(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          children: [\"Ch\\u01B0a c\\xF3 t\\xE0i kho\\u1EA3n?\", /*#__PURE__*/_jsxDEV(\"a\", {\n            href: \"./register\",\n            children: \"T\\u1EA1o t\\xE0i kho\\u1EA3n\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 163,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleLogin,\n          children: \"\\u0110\\u0102NG NH\\u1EACP\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 59,\n    columnNumber: 5\n  }, this);\n};\n_s(Login, \"Ka0kZZC22nEbpC5J/mmjYonsUYU=\");\n_c = Login;\nexport default Login;\nvar _c;\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["React","useState","useEffect","useNavigate","axios","supabase","Function","Encryptor","jsxDEV","_jsxDEV","Login","_s","savedUser","localStorage","getItem","window","location","href","base_Url","username","setUsername","password","setPassword","handleLogin","trim","makeToast","data","error","from","select","eq","stringToMD5","single","console","message","setItem","encrypt","JSON","stringify","showMessage","setTimeout","err","children","fileName","_jsxFileName","lineNumber","columnNumber","className","type","placeholder","value","onChange","e","target","onClick","_c","$RefreshReg$"],"sources":["C:/Users/minhn/my-app/webminhnhat/src/public/login.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\nimport { supabase } from \"../supabasePrivate\";\r\nimport { Function,Encryptor } from \"../config/function\";\r\nconst Login = () => {\r\n\r\n  useEffect(() => {\r\n    const savedUser = localStorage.getItem(\"user\");\r\n    if (savedUser) {\r\n      window.location.href = Function.base_Url();\r\n    }\r\n  }, []);\r\n\r\n\r\n\r\n  const [username, setUsername] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const handleLogin = async () => {\r\n    if (!username.trim() || !password.trim()) {\r\n    Function.makeToast(\"Vui lòng nhập đầy đủ tên đăng nhập và mật khẩu!\",\"warning\");\r\n    \r\n      return;\r\n    }\r\n\r\n    try {\r\n      const { data, error } = await supabase\r\n        .from(\"user\")\r\n        .select(\"*\")\r\n        .eq(\"username\", username)\r\n        .eq(\"password\", Function.stringToMD5(password))\r\n        .single(); // chỉ lấy 1 user khớp\r\n\r\n      if (error) {\r\n        console.error(\"Lỗi đăng nhập:\", error.message);\r\n            Function.makeToast(\"Đăng nhập thất bại!\",\"warning\");\r\n\r\n        return;\r\n      }\r\n\r\n      if (!data) {\r\n         Function.makeToast(\"Sai tên đăng nhập hoặc mật khẩu!\",\"error\");  \r\n        return;\r\n      }\r\n\r\n      localStorage.setItem(\"user\", Encryptor.encrypt( JSON.stringify(data))); // mã hóa thông tin \r\n      Function.showMessage(\"Thành công\", \"Đăng nhập thành công\", \"success\");\r\n      setTimeout(() => {\r\n        window.location.href = \"/\";\r\n      }, 1000);\r\n      \r\n\r\n    } catch (err) {\r\n      console.error(err);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <style>\r\n        {`\r\n\r\n\r\n          body, html {\r\n            margin: 0;\r\n            padding: 0;\r\n            font-family: \"Segoe UI\", Arial, sans-serif;\r\n          }\r\n\r\n          .login-container {\r\n            padding-top: 25px;\r\n            display: flex;\r\n            justify-content: center;\r\n            align-items: center;\r\n          }\r\n\r\n          .login-box {\r\n            background: #fff;\r\n            border-radius: 12px;\r\n            padding: 40px 35px;\r\n            width: 340px;\r\n            box-shadow: 0 0 20px rgba(0, 0, 0, 0.15);\r\n            text-align: center;\r\n          }\r\n\r\n          .login-box h3 {\r\n            font-size: 17px;\r\n            color: #0073e6;\r\n            margin-bottom: 25px;\r\n            letter-spacing: 0.5px;\r\n          }\r\n\r\n          .login-box input[type=\"text\"],\r\n          .login-box input[type=\"password\"] {\r\n            width: 100%;\r\n            padding: 10px 12px;\r\n            border: 1px solid #ccc;\r\n            border-radius: 6px;\r\n            margin-bottom: 15px;\r\n            font-size: 14px;\r\n            outline: none;\r\n            transition: border 0.2s ease;\r\n          }\r\n\r\n          .login-box input[type=\"text\"]:focus,\r\n          .login-box input[type=\"password\"]:focus {\r\n            border-color: #0073e6;\r\n          }\r\n\r\n          .login-box label {\r\n            display: block;\r\n            font-size: 13px;\r\n            color: #444;\r\n            margin-bottom: 20px;\r\n          }\r\n\r\n          .login-box a {\r\n            color: #0073e6;\r\n            text-decoration: none;\r\n            margin-left: 4px;\r\n          }\r\n\r\n          .login-box a:hover {\r\n            text-decoration: underline;\r\n          }\r\n\r\n          .login-box button {\r\n            width: 100%;\r\n            background-color: #ff6600;\r\n            color: white;\r\n            border: none;\r\n            padding: 12px;\r\n            border-radius: 6px;\r\n            font-size: 15px;\r\n            font-weight: bold;\r\n            cursor: pointer;\r\n            transition: background-color 0.25s;\r\n          }\r\n\r\n          .login-box button:hover {\r\n            background-color: #e65c00;\r\n          }\r\n        `}\r\n      </style>\r\n\r\n      <div className=\"login-container\">\r\n        <div className=\"login-box\">\r\n          <h3>ĐĂNG NHẬP HỆ THỐNG</h3>\r\n          <input\r\n            type=\"text\"\r\n            placeholder=\"Nhập tên đăng nhập\"\r\n            value={username}\r\n            onChange={(e) => setUsername(e.target.value)}\r\n          />\r\n          <input\r\n            type=\"password\"\r\n            placeholder=\"Nhập mật khẩu\"\r\n            value={password}\r\n            onChange={(e) => setPassword(e.target.value)}\r\n          />\r\n          <label>\r\n            Chưa có tài khoản?\r\n            <a href=\"./register\">Tạo tài khoản</a>\r\n          </label>\r\n          <button onClick={handleLogin}>ĐĂNG NHẬP</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Login;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}